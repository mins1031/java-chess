# java-chess
체스 게임 구현을 위한 저장소


#기능 목록
- 게임 시작여부
- 체스판 초기화 : 체스게임 -(체스판 초기화)> 체스판
    - 각 진영별 체스말 위치
- 사용자에게 어떤동작을 어떤 위치에서 어떤 위치로 이동할건지 입력 :
    - 기존위치의 말이 타겟위치에 이동할수 있는 말인지 판단
        - 말이동 규칙에 부합
        - 동선에 장애물(말)이 없는경우
            - 만약 타겟 위치에 상대말이 있다면 잡기.
- 각 진영별 죽은 말 관리
- 죽은 말이 왕이면 게임이 종료

체스판, 체스말, 유저, 체스게임, mc

- 각기 다른 체스말 구현
    - 룩, 비숍, 등등
- 차례에 맞는 진영이 체스말을 움직인다
    1. 움직일수 있는지 없는지 판단.(경로에 우리팀 말이 있는지, 경로에 상대팀 말이 있는지)
- 움직인 포인트가 상대말이 있다면 상대말을 죽이기
- 살아있는 말과 죽은 말 관리
- 왕이 죽으면 게임의 승패를 내리기

startGame -> initChessBoard -> progressGame -> endGame

-> 게임을 시작하려면 start, 끝내려면 end를 입력해주세요.
-> (체스판 보여준뒤) 체스말을 움직이려면 move 명령과 좌표를 입력해주세요 ex ) move b2(origin point) b3(move point)
    - 갈수 있다면 보내고 갈수 없는 곳이라면 갈수없다는 표시와함께 계속 진행
    - 갈수 없는곳의 이유
        1. 가는 길목에 말이 막고 있어서
        2. 해당 말의 움직임으론 갈수 없는 곳이어서
-> 계속 진행하다 왕이 죽으면 게임 종료.

- 체스판 초기화
    1. 각 체스판 위치(ex a1, h5..) 문자열로 초기화하고 피스 정보는 null로해 Map타입(정확히는 hashMap)의 체스판을 만든다.
        1-1. 위치값을 스트링으로 할지 더나아가 이넘으로 할지는 고민중. -> 이넘으로하면 이넘내의 데이터는 많지만 체스판 초기화 로직을 간단하게 구현할수 있다.
    2. 백/검 피스들이 위치 초기값을 가져와 알맞은 위치에 구성.
    3. 시작.

- 체스 말 이동
    - 방법 1)
        1. 이동할 위치를 받고
        2. 현재 위치에서 이동할수 있는 위치 리스트를 생성하고
        3. 이동할 위치가 이 리스트에 있는지 확인하고
        4. 있다면 이동 없다면 예외 메세지.
    - 그외엔 잘 안떠오름...
    - 각 동작마다 움직임을 패턴화 시켜놓는다. ex) 앞으로 한칸 가는 동작, 대각선으로 한칸 가는 동작. -> 일단 보류
        - 해서 어떤 패턴을 몇번 적용해야 원하는 위치로 갈수 있는지 판단. -> 이게 어려운거 같은데...

- 체스 말 생성
    - Piece라는 추상 클래스와 PieceMovement 라는 인터페이스를 나눈다
    - PieceMovement는 각 말이 현재 위치에서 움직일 수 있는 위치를 계산하는 메서드와 적을 잡을수 있는지에 대한 메서드가 있다
    - Piece는 체스말을 추상화하기 위한 인터페이스로 당장은 어떤 공통 내용이 필요한지 생각 나지는 않는다..
    -

- 사용자 입력
    -  ex ) move b2(origin point) b3(move point)

- [] 체스판 초기화
    - [] 팀에 따른 체스말 표기
    - [] 체스말이 없는 부분 표기
    - [] 포지션에 따른 체스말 배치
- [] 체스 시작 종료를 입력받는다.
- [] 체스판 출력
- [] 체스말 이동 여부 판단
    - [] 룩
    - [] 비숍
    - [] 퀸
    - [] 킹
    - [] 나이트
    - [] 폰
- [] 체스말 이동시 고려사항
    - [] 타겟과 소스가 같은 포인트인지
    - [] 타겟에 적팀이 있는지
    - [] movable 포인트인지
    - [] 타겟과 소스사이에 다른 말이 없는지

- [] 오류 발생시 시스템이 죽지않고 재입력 유도

- [] 왕이 살아있는동안 게임 계속 진행

- [] 점수계산
    - [] 체스판의 파일별로 체스말을 꺼낸다.
    - [] 각 파일에 존재하는 체스말의 개수를 count
    - [] 체스말의 개수와 점수를 곱해 합산한다.

# 재정의
- 시나리오
    - 양자의 체스 대결
    - 체스판은 8x8의 크기를 가지고 있다.
    - 매턴 무조건 말을 움직여야 한다.
    - 사용자는 한턴에 한번의 행동만 할수 있다
        - 행동은 (명령 | 기존위치 | 이동위치) 로 구성된다.
    - 각 말마다 이동할수 있는 방식이 있다.
    - 적말이 있는 위치로 가게 되면 적말을 아웃시킬수 있다.
    - 왕을 아웃시키는 쪽이 게임을 승리하게 된다

- 1단계 기능 요구 사항
    - 1단계는 체스 게임을 할 수 있는 체스판을 초기화한다.
    - 체스판에서 말의 위치 값은 가로 위치는 왼쪽부터 a ~ h이고, 세로는 아래부터 위로 1 ~ 8로 구현한다.
    - 체스판에서 각 진영은 검은색(대문자)과 흰색(소문자) 편으로 구분한다.

    - 기능 목록 1단계
        * 입력
            - start - 게임시작 / end - 게임 종료 아니면 예외 발생
        * 말
            - 말 12개 캐싱
            - 캐싱한 말만 사용
            - 색깔 : Black / White
            - 종류 : Rook / kNight / Bishop / Queen / King / Pawn

        * 판
            - 가로 8 세로 8
            - 말 넣음

        * 출력
            - 판 출력함
            - 빈 것 '.' 처리

## 2단계 기능 요구 사항
체스 말의 이동 규칙을 찾아보고 체스 말이 이동할 수 있도록 구현한다.
    - move source위치 target위치을 실행해 이동한다.
    - 체스판의 위치 값은 가로 위치는 왼쪽부터 a ~ h이고, 세로는 아래부터 위로 1 ~ 8로 구현한다.
    
‘‘‘
    프로그램 실행 결과
    > 체스 게임을 시작합니다.
    > 게임 시작 : start
    > 게임 종료 : end
    > 게임 이동 : move source위치 target위치 - 예. move b2 b3
    start
    RNBQKBNR
    PPPPPPPP
    ........
    ........
    ........
    ........
    pppppppp
    rnbqkbnr

    move b2 b3
    RNBQKBNR
    PPPPPPPP
    ........
    ........
    ........
    .p......
    p.pppppp
    rnbqkbnr
‘‘‘
 - 한 사이클
    1) 사용자로 부터 명령을 입력받음
    2) 명령 문자열을 파싱함.
    3) 명령을 validation
        3-1) move인지 아닌지
    4) 명령의 before 위치의 piece가 after 위치로 이동할수 있는지 확인
        4-1) 이동못하면 예외
            - 피스의 이동규칙에 어긋나지는 않는지.
            - 이동경로 중간에 다른 피스가 있는지(나이트 제외)
            - 목표위치에 우리팀 피스가 있는지
        4-2) 이동할수 있으면 이동.
    5) after위치에 상대 말이 있는지 없는지 확인
        5-1) 있으면 삭제
        5-2) 없으면 진행
    6) 이후 피스의 위치 Position 정보를 변경.
    7) 반복

 - 두개의 포지션값을 받고 각 포지션을 File, Rank로 바꿔서 해당 이넘의 number값으로 위치를 확인한다
    - 예를들어 이전 포지션과 타겟 포지션의 File값과 Rank값이 달라졌다면 크로스 해서 가는 움직임이고 File은 그대론데 Rank값만 바뀐다면 직선움직임임을 파악할수 있다.
    - 나이트의 패턴은 현재 나이트의 이동 원리에 속하는지만 보면 된다.
        - 예를들어 절댓값. (file값은 2차이, rank값은 1차이) or (file값은 1차이, rank값은 2차이) 이상황에 부합한다면 나이트 패턴임.
        - 약간 말 종류별로 패턴을 나눠야 하나 싶지만 직진, 크로스 패턴으로도 충분히 대체할 수 있다고 판단.

 - 기본 이동 정리
    - 폰
        - 앞으로 한 칸 이동
        - 첫 타임에는 두 칸 이동 가능
        - 한 칸 이동했을 때를 기점으로 잡힐 수 있음 : 앙파상
        - 상대방 말을 잡을 때는 대각선으로만 이동
        - 적 진영 끝에 위치시 : 프로모션 - 룩/나이트/비숍/퀸으로 변경 가능
    - 룩(Major)
        - 가로 세로 직선 이동
    - 나이트(Minor)
        - L자 이동(수평/수직 2칸 - 반대로 한칸)
        - 피스를 뛰어넘을 수 있는 유일한 피스
    - 비숍(Minor)
        - 대각선 직선 이동
    - 퀸(Major)
        - 가로 세로 대각선 직선 이동
    - 킹
        - 가로 세로 대각선 한 칸 이동
        - 단 상대방 킹의 이동 범위 내로 이동할 수 없음
        - 킹은 상대편의 킹과 퀸을 잡을 수 없음
        - 킹과 룩이 모두 이동하지 않은 상태에서, 킹과 룩 사이에 피스가 없는 경우, 그리고 움직였을 때 킹이 잡히지 않을 경우 캐슬링 가능 ->?? 뭔지 모르겠따 일단 보류
        - 퀸사이드 캐슬링 : 왼쪽으로 두 칸 이동, 왼쪽 룩이 킹의 오른쪽에 위치 ->? 보류
        - 킹사이드 캐슬링 : 오른쪽으로 두 칸 이동, 오른쪽 룩이 킹의 왼쪽에 위치 -> 보류

    - 기타 
        - 체크 : 내가 피스를 옮겼고, 옮긴 피스가 다음 턴에 (상대방의 킹 위치가 지금과 같을 때), 킹을 잡을 수 있음
        - 체크메이트 : 상대방이 체크를 당한 상태에서 내가 피스를 옮겼고, 상대방의 킹을 이동할 수 없는 경우
        - 스테일메이트 : 상대방이 체크가 아닌 상태에서 내가 피스를 옮겼고, 상대방의 킹을 이동할 수 없는 경우

    - 피스가 패턴을 받고 받은 패턴을 토대로 갈수 있을지 없을지 정하는게 오히려 맞을거 같다. 결국 기존, 움직일 위치 두개를 통해 어떤 패턴인지만 파악하는게 맞을듯하다.

